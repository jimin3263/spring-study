# 웹 서버, 웹 애플리케이션 서버
## 웹 서버
- HTTP 기반으로 동작
- 정적 리소스 제공, 기타 부가 기능
- 정적(파일), HTML, CSS, JS, 이미지, 영상
- ex) NGINX, APACHE

## 웹 애플리케이션 서버(WAS)
- HTTP기반으로 동장
- 웹 서버 기능 포함 + (정적 리소스 제공 가능)
- 프로그램 코드를 실행해서 애플리케이션 로직 수행
  - 사용자마다 다르게 보여줄 수 있음
- 동적 HTML, HTTP API(JSON)
- ex) 톰캣, Undertow
- 애플리케이션 코드를 실행하는데 더 특화

*-> 둘 차이의 경계 모호, 자바는 서블릿 컨테이너 기능을 제공하면 WAS*

## 웹 시스템 구성 
### 📌 WAS, DB
- WAS, DB 만으로 시스템 구성 가능
- WAS가 너무 많은 역할 담당, 서버 과부하 우려
- WAS 장애시 오류 화면도 노출 불가능

### 📌 WEB, WAS, DB
- 정적 리소스는 웹 서버가 처리
- 동적인 처리 필요 -> WAS에 요청 위임
- 효율적인 리소스 관리
  - 정적 리소스 많이 사용 -> Web 서버 증설
  - 애플리케이션 리소스 많이 사용 -> WAS 증설

![image](https://user-images.githubusercontent.com/50178026/126261050-1391d5de-3308-42fd-82da-333e1111de7b.png)

- WAS 서버는 애플리케이션 로직이 동작하므로 잘 죽음
- WAS, DB 장애 -> WEB 서버가 오류 화면 제공 가능

# 서블릿
> 의미있는 비즈니스 로직 제외하고 모두 지원해줌  
- HTTP 요청시
  - WAS는 request, response 객체 새로 만들고 서블릿 객체 호출
  - 개발자는 Request/Response 객체에서 HTTP 요청/응답 정보를 편리하게 꺼내서 사용
  - WAS는 Response 객체에 담겨있는 내용으로 HTTP 응답 정보 생성


## 서블릿 컨테이너
- 톰캣처럼 서블릿을 지원하는 WAS를 서블릿 컨테이너라고 함
- 서블릿 컨테이너는 서블릿 객체를 생성, 초기화, 호출, 종료하는 생명 주기 관리
- 서블릿 객체는 **싱글톤으로 관리** (req, res 객체는 새로 만들어야 함)
  - 요청이 올 때마다 객체를 생성하는 것은 비효율
  - 최초 로딩 시점에 서블릿 객체를 미리 만들어두고 재활용
  - 모든 고객 요청은 동일한 서블릿 객체 인스턴스에 접근
  - **공유 변수 사용 주의**
  - 서블릿 컨테이너 종료시 함께 종료
- JSP도 서블릿으로 변환되어서 사용
- 동시 요청을 위한 **멀티 쓰레드 처리 지원**

## 멀티 쓰레드
- 서블릿을 호출함
- 애플리케이션 코드를 하나하나 순차적으로 실행하는 것은 쓰레드
- 메인 메서드를 처음 실행하면 main 이라는 이름의 쓰레드가 실행
- 쓰레드가 없다면 자바 애플리케이션 실행이 불가능
- 쓰레드는 한번에 하나의 코드 라인만 수행
- 동시 처리가 필요하면 쓰레드를 추가로 생성  


*-> **쓰레드 풀**: 쓰레드 **미리 생성**, 사용을 종료하면 쓰레드 풀에 해당 쓰레드를 **반납***

- 쓰레드 풀의 적정 숫자?🤔
  - 로직의 복잡도, CPU, 메모리 등 상황에 따라 모두 다름
  - 성능 테스트 필요
  - 툴: 아파치 ab, nGrinder

- **핵심**
  - WAS에서 멀티 쓰레드 지원해줌
  - 멀티 쓰레드 환경이므로 **싱글톤 객체는 주의**해서 사용
  - 개발자는 **싱글 쓰레드 프로그래밍을 하듯이** 편리하게 소스 코드 개발

# UI 기술 

### 정적 리소스
- 고정된 HTML 파일, CSS, JS, 이미지, 영상 등 제공

### HTML 페이지
- 동적으로 필요한 HTML 파일 생성해서 전달
- 동적으로 HTMl 생성(JSP, 타임리프)

### HTTP API
- 데이터 전달
- JSON 형식 사용
- UI 화면이 필요하면 클라이언트가 별도 처리

### SSR - 서버 사이드 렌더링
- 서버에서 최종 HTML을 생성해서 클라이언트에 전달
- 주로 정적인 화면에 사용
- 관련 기술) JSP, 타임리프

### CSR - 클라이언트 사이드 렌더링
- HTML 결과를 자바스크립트를 사용해 웹 브라우저에서 동적에서 생성해서 사용
- 동적인 화면에서 사용, 웹 환경을 앱처럼 필요한 부분부분 변경 가능
- 관련 기술) 구글 캘린더, 구글 지도 (지도 크고 작게)

