# ìƒí’ˆ ê´€ë¦¬ ì„œë¹„ìŠ¤

> BasicItemController
```java
@Controller
@RequestMapping("/basic/items")
@RequiredArgsConstructor
public class BasicItemController {

    private final ItemRepository itemRepository;
    
    ...
}
```
- `@RequiredArgsConstructor` : `final`ì´ ë¶™ì€ ë©¤ë²„ë³€ìˆ˜ë§Œ ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ
- ìƒì„±ì í•˜ë‚˜ì¼ë•Œ `@Autowired`ìƒëµ ê°€ëŠ¥ 

> ìƒí’ˆ ë“±ë¡  

- ìƒí’ˆ ë“±ë¡ í¼: GET `/basic/items/add`
- ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬: POST `/basic/items/add`
`th:action`ì„ í†µí•´ í˜„ì¬ URLì— ë°ì´í„°ë¥¼ ì „ì†¡í•œ í›„, ë“±ë¡ ì²˜ë¦¬ë¥¼ í•¨

```java
    @PostMapping("/add")
    public String save2(@ModelAttribute("item") Item item){

        itemRepository.save(item);
        return "basic/item";
    }
```

> ìƒí’ˆ ìˆ˜ì •

```java
    @PostMapping("{itemId}/edit")
    public String edit(@PathVariable Long itemId, @ModelAttribute Item item){
        itemRepository.update(itemId,item);
        
        return "redirect:/basic/items/{itemId}";
    }
```
- ë·°ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³  `redirect`ë¥¼ í†µí•´ ê²½ë¡œë¥¼ ë‹¤ì‹œ ì„¤ì •í•˜ë„ë¡ í•¨  


## íƒ€ì„ë¦¬í”„ 

**íƒ€ì„ë¦¬í”„ ì‚¬ìš© ì„ ì–¸**  
`<html xmlns:th="http://www.thymeleaf.org">`  

**th:href**  
ê²½ë¡œ ì§€ì •í• ë•Œ `@{...}` ì‚¬ìš©  

**th:each**  
ë°˜ë³µ ì¶œë ¥í• ë•Œ `<tr th:each="item : ${items}">` 

**${...}**  
ë³€ìˆ˜ í‘œí˜„í• ë•Œ ì‚¬ìš©  

**th:text**  
textê°’ ë³€ê²½

**URL ë§í¬ ê°„ë‹¨íˆ**  
ë¦¬í„°ëŸ´ ëŒ€ì²´ ë¬¸ë²•ì„ ì‚¬ìš©í•´ì„œ   
`th:href="@{/basic/items/{itemId}(itemId=${item.id})}"` -> `th:href="@{|/basic/items/${item.id}|}"`ë¡œ í‘œí˜„í•  ìˆ˜ ìˆìŒ

## PRG - Post/Redirect/Get

POST ë“±ë¡ í›„ ìƒˆë¡œê³ ì¹¨ í•œë‹¤ë©´ğŸ¤”  
ë§ˆì§€ë§‰ì— ì„œë²„ì— ì „ì†¡í•œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì „ì†¡í•˜ë¯€ë¡œ IDë§Œ ë‹¤ë¥¸ ìƒí’ˆ ë°ì´í„°ê°€ ê³„ì† ìŒ“ì´ê²Œ ë¨

*-> Redirectë¡œ í•´ê²°* 

## RedirectAttributes

ë¦¬ë‹¤ì´ë ‰íŠ¸ í›„ ì˜ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë©”ì‹œì§€ ë„ìš°ê³ ì í•¨

```java
    @PostMapping("/add")
    public String save4(@ModelAttribute Item item, RedirectAttributes redirectAttributes){
        Item savedItem = itemRepository.save(item);
        redirectAttributes.addAttribute("itemId",savedItem.getId());
        redirectAttributes.addAttribute("status",true);

        return "redirect:/basic/items/{itemId}";
    }
```
- statusëŠ” `?status=true`ë¡œ ì¿¼ë¦¬ ì²˜ë¦¬í•¨
- ì‹¤í–‰ ê²°ê³¼: `http://localhost:8080/basic/items/3?status=true`
